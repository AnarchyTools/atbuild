package:
  name: "atbuild"

tasks:
    helloworld:
        tool: "shell"
        script: "echo \"Hello world\""

    default:
        tool: "atllbuild"
        source: ["cli/src/**.swift", "parsers/yaml/**.swift"]
        name: "atbuild"
        outputType: "executable"

    bootstrap-osx:
        tool: "atllbuild"
        source: ["cli/src/**.swift", "parsers/yaml/**.swift"]
        name: "atbuild"
        bootstrapOnly: true
        llbuildyaml: "llbuild-osx.yaml"
        outputType: "executable"

    bootstrap-linux:
        tool: "atllbuild"
        source: ["cli/src/**.swift", "parsers/yaml/**.swift"]
        name: "atbuild"
        bootstrapOnly: true
        llbuildyaml: "llbuild-linux.yaml"
        linkSDK: false
        compileOptions: ["-D","CORELIBS_FOUNDATION"]
        outputType: "executable"

    bootstrap:
        tool: "nop"
        dependency: ["bootstrap-osx", "bootstrap-linux"]

    yaml:
        tool: "atllbuild"
        source: ["parsers/yaml/**.swift"]
        name: "yaml"
        outputType: "static-library"